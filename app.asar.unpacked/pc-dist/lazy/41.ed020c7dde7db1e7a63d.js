(this.webpackJsonp=this.webpackJsonp||[]).push([[41],{"64yT":function(e,r,t){"use strict";t.r(r);var n=t("q1tI"),c=t.n(n),u=t("9Ht6"),a=t("l4dk"),o=t("N1xz"),s=t("KBA3"),f=t("jDHv");const i=Object(n.memo)((e=>{const{maxColumns:r=60,interval:c=500}=e,s=Object(n.useRef)(0),i=Object(n.useRef)(0),l=Object(n.useRef)(performance.now()),m=Object(n.useRef)([]),g=Object(n.useRef)(),p=Object(u.useSetRecoilState)(a.a),b=Object(n.useRef)(performance.now()),j=Object(n.useRef)(0),O=Object(n.useRef)(60),_=Object(n.useRef)(),M=Object(n.useCallback)((e=>{try{var r;if(!g.current){const{rAF:e}=t("MnS2"),{requestAnimationFrame:r}=f.ModuleContainer.resolve(e);g.current=r}return null===(r=g.current)||void 0===r?void 0:r.call(g,e,!0)}catch(n){}}),[]),d=()=>{(()=>{const e=performance.now();if(i.current+=1,j.current+=e-b.current,e>=l.current+c){const t=e-l.current;let n=Math.round(1e3/(j.current/i.current));const u=Math.max.apply(Math.max,[...m.current,O.current]);if(n=u<=120&&u>=110?n>120?120:n:n>60?60:n,m.current=m.current.concat(n),t>1500)for(let e=1;e<=(t-c)/1e3;e++)m.current=m.current.concat(0);m.current=m.current.slice(Math.max(m.current.length-r,0)),j.current=0,i.current=0,l.current=e;const a={fps:m.current[m.current.length-1],avgFps:Number((m.current.reduce(((e,r)=>e+r),0)/m.current.length).toFixed(2)),maxFps:Math.max.apply(Math.max,m.current),fpsColumns:m.current};O.current=Math.max(O.current,a.maxFps),_.current&&_.current.recordFps(a,O.current,e),p(a)}b.current=e})();const e=M(d);e&&(s.current=e[0])};return Object(n.useEffect)((()=>{if(!(()=>{if(!o.a.canIUse())return;return!o.a.UIManager.getRegisteredFpsMonitor()})())return;if(l.current=performance.now(),b.current=performance.now(),_.current=o.a.UIManager.registerFpsMonitor(),!_.current)return;const e=M(d);return e&&(s.current=e[0]),()=>{e&&e[1](s.current),_.current&&o.a.UIManager.unregisterFpsMonitor(_.current.id)}}),[]),null})),l=Object(n.memo)((e=>{const[r,t]=Object(n.useState)(s.a.getConfig().enable_fps_monitor||s.a.getConfig().enable_fps_monitor_v2);return Object(n.useEffect)((()=>{const e=()=>{const e=s.a.getConfig().enable_for_staging_account,r=s.a.getConfig().staging_account,n=s.a.getConfig().enable_fps_monitor||s.a.getConfig().enable_fps_monitor_v2,c=s.a.enable&&n||e&&r;t(c)};return s.a.on("staging_account",e),()=>{s.a.removeListener("staging_account",e)}}),[]),r?c.a.createElement(i,e):null}));r.default=l},l4dk:function(e,r,t){"use strict";t.d(r,"a",(function(){return c}));var n=t("9Ht6");const c=Object(n.atom)({key:"metricz/fps",default:{fps:0,avgFps:0,maxFps:0,fpsColumns:[]}})}}]);
//# sourceMappingURL=../sourcemaps/lazy/41.ed020c7dde7db1e7a63d.js.map